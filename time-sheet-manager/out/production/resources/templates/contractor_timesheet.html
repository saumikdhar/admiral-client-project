<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml" lang="en">
<html lang="en">
<head th:replace="fragments/header :: head">
    <meta charset="UTF-8">
    <title>TimeSheet</title>
</head>
<body>
<div th:replace="fragments/header :: navbar"></div>
<h5>Contractor TimeSheet</h5>
<div class = "box">
<form class="box" th:action="TimeSheetDetails" id="TimeSheet1" METHOD="post" th:object="${TimeSheet}" >
    <div class="row">
        <div class="form-control">
            <label>Agency</label>
            <select th:field="${agencycontractor.agency_id}">
                <option th:each="agency: ${agencies}" th:value="${agency.id}" th:text="${agency.agencyName}"></option>
            </select>
        </div>
        <div class="input-group form-control align-items-center">
            <label>Start Date</label>
            <div class="input-group">
                <div class="input-group">
                    <input aria-describedby="Enter the date of your working week"
                           class="form-control"
                           placeholder="Start date"
                           type="date" id="e"
                           th:field="*{start_date}" />

                </div>
                <div class="alert alert-danger" th:if="${#fields.hasErrors('start_date')}" th:errors="*{start_date}">
                start_date Error
            </div>
            </div>

            <script>
                document.getElementById('e').value = new Date().toISOString().substring(0, 10);
            </script>
        </div>
        <fieldset class="form-check form-check-inline" >
        <div class="input-group" >
            <label class="form-check-label form-control">Monday</label>
            <div class="input-group-prepend">
                <div class="input-group-text">
                    <input
                           name = "mondaylist"
                           class="form-check-input"
                           placeholder="Monday"
                           type="checkbox" th:field="*{monday_worked}"/>
                </div>
            </div>
        </div>

        <div class="input-group">
            <label class="form-check-label form-control">Tuesday</label>
            <div class="input-group-prepend">
                <div class="input-group-text">
                    <input
                            name = "tuesdaylist"
                            class="form-check-input"
                            placeholder="Tuesday"
                            type="checkbox" th:field="*{tuesday_worked}"/>
                </div>
            </div>
        </div>

        <div class="input-group">
            <label class="form-check-label form-control">Wednesday</label>
            <div class="input-group-prepend">
                <div class="input-group-text">
                    <input
                            name = "wednesdaylist"
                            class="form-check-input"
                            placeholder="Wednesday"
                            type="checkbox" th:field="*{wednesday_worked}"/>
                </div>
            </div>
        </div>

        <div class="input-group">
            <label class="form-check-label form-control">Thursday</label>
            <div class="input-group-prepend">
                <div class="input-group-text">
                    <input
                            name = "thursdaylist"
                            class="form-check-input"
                            placeholder="Thursday"
                            type="checkbox" th:field="*{thursday_worked}"/>
                </div>
            </div>
        </div>

        <div class="input-group">
            <label class="form-check-label form-control">Friday</label>
            <div class="input-group-prepend">
                <div class="input-group-text">
                    <input
                            name = "fridaylist"
                            class="form-check-input"
                            placeholder="Friday"
                            type="checkbox" th:field="*{friday_worked}"/>
                </div>
            </div>
        </div>

        <div class="input-group">
            <label class="form-check-label form-control">Saturday</label>
            <div class="input-group-prepend">
                <div class="input-group-text">
                    <input
                            name = "saturdaylist"
                            class="form-check-input"
                            placeholder="Saturday"
                            type="checkbox" th:field="*{saturday_worked}"/>
                </div>
            </div>
        </div>

        <div class="input-group">
            <label class="form-check-label form-control">Sunday</label>
            <div class="input-group-prepend">
                <div class="input-group-text">
                    <input
                            name = "sundaylist"
                            class="form-check-input"
                            placeholder="Sunday"
                            type="checkbox" th:field="*{sunday_worked}"/>
                </div>
            </div>
        </div>

        </fieldset>

        <div class="input-group form-control">
            <label>Overtime</label>
            <div class="input-group">
            <input
                    id = "overtime"
                    th:name = "overtime"
                    class="form-control"
                    step="0.01" min="0" max="20"
                    type="number" placeholder="Please enter a number" th:field="*{overtime}" />
            </div>
        </div>
        <script>
            document.getElementById("overtime").defaultValue = "0";
        </script>

        <button  class="btn btn-primary"  id="time_sheet_submit" type="submit">Submit time sheet</button>
    </div>

</form>
</div>


<div th:replace="fragments/footer :: footer">
</div>

<script>
    var date = document.querySelector('[type=date]');

    function onlyMonday(e){

        var day = new Date( e.target.value ).getUTCDay();

        // Days in JS range from 0-6 where 0 is Sunday and 6 is Saturday

        if( day == 0 ){
            e.target.setCustomValidity('please pick a monday');
        } else if (day == 2) {
            e.target.setCustomValidity('please pick a monday');
        } else if (day == 3){
            e.target.setCustomValidity('please pick a monday');
        } else if (day == 4){
            e.target.setCustomValidity('please pick a monday');
        } else if (day == 5){
            e.target.setCustomValidity('please pick a monday');
        } else if (day == 6){
            e.target.setCustomValidity('please pick a monday');
        } else {
            e.target.setCustomValidity('');
        }
    }
    date.addEventListener('input',onlyMonday);
</script>


<script>

    function checkboxValidation(e) {
        var days = new Date(e.target.value).getUTCDay();

        document.getElementsByName("mondaylist").disabled = true;
        document.getElementsByName("tuesdaylist").disabled = true;
        document.getElementsByName("wednesdaylist").disabled = true;
        document.getElementsByName("thursdaylist").disabled = true;
        document.getElementsByName("fridaylist").disabled = true;
        document.getElementsByName("saturdaylist").disabled = true;
        document.getElementsByName("sundaylist").disabled = true;


        if (days == 1) {
            document.getElementsByName("mondaylist").disabled = false;
        } else if (days == 2) {
            document.getElementsByName("mondaylist").disabled = false;
            document.getElementsByName("tuesdaylist").disabled = false;
        } else if (days == 3) {
            document.getElementsByName("mondaylist").disabled = false;
            document.getElementsByName("tuesdaylist").disabled = false;
            document.getElementsByName("wednesdaylist").disabled = false;
        } else if (days == 4) {
            document.getElementsByName("mondaylist").disabled = false;
            document.getElementsByName("tuesdaylist").disabled = false;
            document.getElementsByName("wednesdaylist").disabled = false;
            document.getElementsByName("thursdaylist").disabled = false;
        } else if (days == 5) {
            document.getElementsByName("mondaylist").disabled = false;
            document.getElementsByName("tuesdaylist").disabled = false;
            document.getElementsByName("wednesdaylist").disabled = false;
            document.getElementsByName("thursdaylist").disabled = false;
            document.getElementsByName("fridaylist").disabled = false;
        } else if (days == 6) {
            document.getElementsByName("mondaylist").disabled = false;
            document.getElementsByName("tuesdaylist").disabled = false;
            document.getElementsByName("wednesdaylist").disabled = false;
            document.getElementsByName("thursdaylist").disabled = false;
            document.getElementsByName("fridaylist").disabled = false;
            document.getElementsByName("saturdaylist").disabled = false;
        } else if (days == 0) {
            document.getElementsByName("mondaylist").disabled = false;
            document.getElementsByName("tuesdaylist").disabled = false;
            document.getElementsByName("wednesdaylist").disabled = false;
            document.getElementsByName("thursdaylist").disabled = false;
            document.getElementsByName("fridaylist").disabled = false;
            document.getElementsByName("saturdaylist").disabled = false;
            document.getElementsByName("sundaylist").disabled = false;
        }
    }

    date.addEventListener('input',checkboxValidation);
</script>



<script>
function TDate() {
var UserDate = document.getElementById("e").value;
var ToDate = new Date();

if (new Date(UserDate).getTime() > ToDate.getTime()) {
alert("The Date must be less than today's date");
return false;
}
return true;
}
</script>
</body>
</html>