<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml" lang="en">
<html lang="en">
<head th:replace="fragments/header :: head">
    <meta charset="UTF-8">
    <title>TimeSheet</title>
</head>
<body>
<div th:replace="fragments/header :: navbar-contractor"></div>
<h5>Contractor TimeSheet</h5>
<div class="box">
    <form class="box" th:action="TimeSheetDetails" id="TimeSheet1" METHOD="post" th:object="${TimeSheet}">
        <div class="custom-margin box">
            <div class="row">
                <div class="form-control row">
                    <div class="input-group">
                        <label>Start Date</label>
                        <div class="input-group">
                            <div class="input-group">
                                <input aria-describedby="Enter the date of your working week"
                                       class="form-control"
                                       placeholder="Start date"
                                       type="date" id="e"
                                       th:field="*{start_date}" required/>

                            </div>
                            <div class="alert alert-danger" th:if="${#fields.hasErrors('start_date')}"
                                 th:errors="*{start_date}">
                                start_date Error
                            </div>
                        </div>

                        <script>
                            document.getElementById('e').value = new Date().toISOString().substring(0, 10);
                        </script>
                    </div>
                    <fieldset class="form-check form-check-inline">
                        <div class="input-group">
                            <label class="form-check-label form-control">Monday</label>
                            <div class="input-group-prepend">
                                <div class="input-group-text">
                                    <input
                                            id="mondayList"
                                            name="mondaylist"
                                            class="form-check-input"
                                            placeholder="Monday"
                                            type="checkbox" th:field="*{monday_worked}"/>
                                </div>
                            </div>
                        </div>

                        <div class="input-group">
                            <label class="form-check-label form-control">Tuesday</label>
                            <div class="input-group-prepend">
                                <div class="input-group-text">
                                    <input
                                            id="tuesdayList"
                                            name="tuesdaylist"
                                            class="form-check-input"
                                            placeholder="Tuesday"
                                            type="checkbox" th:field="*{tuesday_worked}"/>
                                </div>
                            </div>
                        </div>

                        <div class="input-group">
                            <label class="form-check-label form-control">Wednesday</label>
                            <div class="input-group-prepend">
                                <div class="input-group-text">
                                    <input
                                            id="wednesdayList"
                                            name="wednesdaylist"
                                            class="form-check-input"
                                            placeholder="Wednesday"
                                            type="checkbox" th:field="*{wednesday_worked}"/>
                                </div>
                            </div>
                        </div>

                        <div class="input-group">
                            <label class="form-check-label form-control">Thursday</label>
                            <div class="input-group-prepend">
                                <div class="input-group-text">
                                    <input
                                            id="thursdayList"
                                            name="thursdaylist"
                                            class="form-check-input"
                                            placeholder="Thursday"
                                            type="checkbox" th:field="*{thursday_worked}"/>
                                </div>
                            </div>
                        </div>

                        <div class="input-group">
                            <label class="form-check-label form-control">Friday</label>
                            <div class="input-group-prepend">
                                <div class="input-group-text">
                                    <input
                                            id="fridayList"
                                            name="fridaylist"
                                            class="form-check-input"
                                            placeholder="Friday"
                                            type="checkbox" th:field="*{friday_worked}"/>
                                </div>
                            </div>
                        </div>

                        <div class="input-group">
                            <label class="form-check-label form-control">Saturday</label>
                            <div class="input-group-prepend">
                                <div class="input-group-text">
                                    <input
                                            id="saturdayList"
                                            name="saturdaylist"
                                            class="form-check-input"
                                            placeholder="Saturday"
                                            type="checkbox" th:field="*{saturday_worked}"/>
                                </div>
                            </div>
                        </div>

                        <div class="input-group">
                            <label class="form-check-label form-control">Sunday</label>
                            <div class="input-group-prepend">
                                <div class="input-group-text">
                                    <input
                                            id="sundayList"
                                            name="sundaylist"
                                            class="form-check-input"
                                            placeholder="Sunday"
                                            type="checkbox" th:field="*{sunday_worked}"/>
                                </div>
                            </div>
                        </div>

                    </fieldset>

                    <div class="input-group">
                        <label>Overtime</label>
                        <div class="input-group">
                            <input
                                    id="overtime"
                                    th:name="overtime"
                                    class="form-control"
                                    step="0.01" min="0" max="20"
                                    type="number" placeholder="Please enter a number" th:field="*{overtime}"/>
                        </div>
                    </div>
                    <script>
                        document.getElementById("overtime").defaultValue = "0";
                    </script>

                    <input
                            th:name="${_csrf.parameterName}"
                            th:value="${_csrf.token}"
                            type="hidden"/>

                    <button class="btn btn-primary" id="time_sheet_submit" type="submit">Submit time sheet</button>
                </div>
            </div>
        </div>
    </form>


    <div th:replace="fragments/footer :: footer">
    </div>

<<<<<<< HEAD


</div>
<div th:replace="fragments/footer :: footer">
</div>
    <script>
    var date = document.querySelector('[type=date]');

    function onlyMonday(e){

        var day = new Date( e.target.value ).getUTCDay();

        // Days in JS range from 0-6 where 0 is Sunday and 6 is Saturday

        if( day == 0 ){
            e.target.setCustomValidity('please pick a monday');
        } else if (day == 2) {
            e.target.setCustomValidity('please pick a monday');
        } else if (day == 3){
            e.target.setCustomValidity('please pick a monday');
        } else if (day == 4){
            e.target.setCustomValidity('please pick a monday');
        } else if (day == 5){
            e.target.setCustomValidity('please pick a monday');
        } else if (day == 6){
            e.target.setCustomValidity('please pick a monday');
        } else {
            e.target.setCustomValidity('');
=======
    <script>
        var date = document.querySelector('[type=date]');

        function onlyMonday(e) {

            var day = new Date(e.target.value).getUTCDay();

            // Days in JS range from 0-6 where 0 is Sunday and 6 is Saturday

            if (day == 0) {
                e.target.setCustomValidity('please pick a monday');
            } else if (day == 2) {
                e.target.setCustomValidity('please pick a monday');
            } else if (day == 3) {
                e.target.setCustomValidity('please pick a monday');
            } else if (day == 4) {
                e.target.setCustomValidity('please pick a monday');
            } else if (day == 5) {
                e.target.setCustomValidity('please pick a monday');
            } else if (day == 6) {
                e.target.setCustomValidity('please pick a monday');
            } else {
                e.target.setCustomValidity('');
            }
>>>>>>> feature/previousTimeSheets
        }

        date.addEventListener('input', onlyMonday);
    </script>


    <script>

        var date = document.querySelector('[type=date]');

        function checkboxValidation(e) {

            //Both variables are days of the week, where Sunday =0, Saturday =6
            var selectedDate = new Date(e.target.value);
            var selectedDay = selectedDate.getUTCDay();
            var today = new Date();
            var dayToday = today.getUTCDay();

            var oneDay = 24 * 60 * 60 * 1000; // hours*minutes*seconds*milliseconds

            var differenceInDays = Math.round(Math.abs((selectedDate.getTime() - today.getTime()) / (oneDay)));

            if (differenceInDays >= 7) {
                console.log("More than 7 days ago.  Enabling all");
                document.getElementById("mondayList").disabled = false;
                document.getElementById("tuesdayList").disabled = false;
                document.getElementById("wednesdayList").disabled = false;
                document.getElementById("thursdayList").disabled = false;
                document.getElementById("fridayList").disabled = false;
                document.getElementById("saturdayList").disabled = false;
                document.getElementById("sundayList").disabled = false;
            } else {

                if (selectedDay == 1) {
                    console.log("It's a Monday, so disabling all but Monday");
                    document.getElementById("mondayList").disabled = false;
                    document.getElementById("mondayList").checked = false;
                    document.getElementById("tuesdayList").disabled = true;
                    document.getElementById("tuesdayList").checked = false;
                    document.getElementById("wednesdayList").disabled = true;
                    document.getElementById("wednesdayList").checked = false;
                    document.getElementById("thursdayList").disabled = true;
                    document.getElementById("thursdayList").checked = false;
                    document.getElementById("fridayList").disabled = true;
                    document.getElementById("fridayList").checked = false;
                    document.getElementById("saturdayList").disabled = true;
                    document.getElementById("saturdayList").checked = false;
                    document.getElementById("sundayList").disabled = true;
                    document.getElementById("sundayList").checked = false;
                }
                ;

                if (dayToday == 2) {
                    console.log("its tuesday")
                    document.getElementById("mondayList").disabled = false;
                    document.getElementById("tuesdayList").disabled = false;
                } else if (dayToday == 3) {
                    document.getElementById("mondayList").disabled = false;
                    document.getElementById("tuesdayList").disabled = false;
                    document.getElementById("wednesdayList").disabled = false;
                } else if (dayToday == 4) {
                    document.getElementById("mondayList").disabled = false;
                    document.getElementById("tuesdayList").disabled = false;
                    document.getElementById("wednesdayList").disabled = false;
                    document.getElementById("thursdayList").disabled = false;
                } else if (dayToday == 5) {
                    document.getElementById("mondayList").disabled = false;
                    document.getElementById("tuesdayList").disabled = false;
                    document.getElementById("wednesdayList").disabled = false;
                    document.getElementById("thursdayList").disabled = false;
                    document.getElementById("fridayList").disabled = false;
                } else if (dayToday == 6) {
                    document.getElementById("mondayList").disabled = false;
                    document.getElementById("tuesdayList").disabled = false;
                    document.getElementById("wednesdayList").disabled = false;
                    document.getElementById("thursdayList").disabled = false;
                    document.getElementById("fridayList").disabled = false;
                    document.getElementById("saturdayList").disabled = false;
                } else if (dayToday == 0) {
                    document.getElementById("mondayList").disabled = false;
                    document.getElementById("tuesdayList").disabled = false;
                    document.getElementById("wednesdayList").disabled = false;
                    document.getElementById("thursdayList").disabled = false;
                    document.getElementById("fridayList").disabled = false;
                    document.getElementById("saturdayList").disabled = false;
                    document.getElementById("sundayList").disabled = false;
                }
            }
        }

        date.addEventListener('input', checkboxValidation);
    </script>


    <script>
        function TDate() {
            var UserDate = document.getElementById("e").value;
            var ToDate = new Date();

            if (new Date(UserDate).getTime() > ToDate.getTime()) {
                alert("The Date must be less than today's date");
                return false;
            }
            return true;
        }
    </script>
</div>
</body>
</html>